create database videoteca;

use videoteca;

create table actor(
    id          int             not null AUTO_INCREMENT,
    nombre      varchar(64)     not null,
    apellidos   varchar(64)     not null,
    clave       varchar(32)     not null default '',
    primary key(id)
);

INSERT INTO actor(nombre, apellidos, clave) 
VALUES('Harrison', 'Ford', 'nm0000148');

INSERT INTO actor(nombre, apellidos, clave) 
VALUES('Russell', 'Crowe', 'nm0000128'); 

CREATE PROCEDURE pa_actores_lista()
SELECT  * FROM  actor;

CALL pa_actores_lista();

USE videoteca;

CREATE PROCEDURE pa_actores_cantidad()
SELECT  COUNT(*) FROM  actor;

CALL pa_actores_cantidad();

USE videoteca;
DELIMITER //
CREATE PROCEDURE pa_actores_cantidad2() BEGIN
DECLARE actores INT;
SELECT  COUNT(*) FROM  actor INTO  actores; 
SELECT actores;
END
// DELIMITER ; 


USE videoteca;
CREATE PROCEDURE pa_actores_buscar(letra CHAR(2))
SELECT  * FROM  actor WHERE  nombre LIKE letra;

USE videoteca;
CALL pa_actores_buscar('h%');


USE videoteca;
DELIMITER //
CREATE PROCEDURE pa_actores_buscar3(  
    IN letra CHAR(2),  
    OUT actores INT ) BEGIN
    SELECT  * FROM  actor WHERE  nombre LIKE letra;  
    SELECT  COUNT(*) INTO  actores FROM  actor 
    WHERE  nombre LIKE letra;  
    END
// DELIMITER ;

USE videoteca;

CALL pa_actores_buscar3('h%', @cantidad);
SELECT @cantidad; 


USE videoteca;
DELIMITER //
CREATE PROCEDURE pa_actores_eliminar() BEGIN
DELETE FROM videoteca;
END
//DELIMITER ; 

//

USE videoteca;
SHOW CREATE PROCEDURE pa_actores_lista;


USE videoteca;
SHOW CREATE PROCEDURE pa_actores_lista\G


USE videoteca;
SHOW PROCEDURE STATUS LIKE 'pa_actores_lista'\G


USE videoteca;
SHOW PROCEDURE STATUS\G 


USE videoteca;
CREATE PROCEDURE pa_actor_insertar(  nuevo_nombre VARCHAR(64),  nuevo_apellidos VARCHAR(64),  nuevo_clave VARCHAR(32) )
INSERT INTO actor(  nombre,  apellidos,  clave ) VALUES(  nuevo_nombre,  nuevo_apellidos,  nuevo_clave );


USE videoteca;
CALL pa_actor_insertar(  'Tim','Robbins','nm0000209');


CALL pa_actores_lista();

USE videoteca;

USE videoteca;
CALL pa_actor_insertar(  'Howard','Willis','hw009876');

CALL pa_actores_lista();